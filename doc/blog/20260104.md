# KnowU Project Assessment & Roadmap
*January 4, 2026*

## Current State Analysis

### ‚úÖ What's Working Well

1. **LLM Extraction Pipeline**: Claims are being extracted from notes using structured output (JSON schema)
2. **Ontology Foundation**: Working ontology with classes (Entity, SoftwareModule, Document, Person, Decision, etc.) and predicates
3. **Clean Architecture**: Separation of concerns with Contract, Domain, Storage, Infrastructure layers
4. **Testability**: Factory pattern, dependency injection, comprehensive tests
5. **Configurable**: Personas and JSON schema externalized from code

### üìã Synopsis Alignment

The [Synopsis.md](../Synopsis.md) outlines a sophisticated 3-layer model (Note ‚Üí Claim ‚Üí Fact), but the current implementation only extracts **Claims** from documents. The validation/curation loop (Claim ‚Üí Fact) doesn't exist yet.

### üî¥ Critical Gaps for the Vision

1. **No Context Hierarchy**: Knowledge floats without structure - no project/product/process categorization
2. **No Interactive Validation**: System doesn't ask users to validate claims (correctness, relevance)
3. **No Fact Promotion**: Claims can't be promoted to Facts
4. **No Entity Resolution**: Multiple mentions of same entity aren't linked
5. **No Storage/Persistence**: Claims are generated but not saved
6. **No Knowledge Query**: Can't ask "what do we know about X?"

---

## Proposed Roadmap (Prioritized)

### Phase 1: Persistence & Context (Foundation)
*Enable knowledge to be saved and organized*

#### 1.1 Implement Storage Layer ‚≠ê **HIGHEST PRIORITY**
- Create `IClaimRepository` interface
- Implement file-based or SQLite storage for claims
- Persist: claim triples, confidence, source document reference, timestamp, extracted-by metadata
- **Why First**: Without storage, all extraction is ephemeral and useless

#### 1.2 Add Context/Topic Model
- Create `Context` entity with properties: `id`, `name`, `type` (project/product/process/people), `parent` (for hierarchy)
- Extend Document with `contextId` reference
- Allow claims to inherit context from source document
- Add context API endpoint to create/list contexts
- **Benefit**: Enables "show me all claims about Project X" queries

#### 1.3 Enhance Note Management
- Implement proper Note storage (currently just passing documents)
- Add metadata: author, timestamp, tags
- Link notes to contexts

---

### Phase 2: Interactive Validation (Human-in-the-Loop)
*Enable users to curate knowledge*

#### 2.1 Claim Review UI
- Frontend component to display claims extracted from a note
- Actions: Approve, Reject, Edit, Mark Uncertain
- Show: subject, predicate, object, confidence, source text snippet

#### 2.2 Fact Promotion System
- When claim approved ‚Üí create Fact with:
  - Triple (subject/predicate/object)
  - `approvedBy` (user)
  - `derivedFrom` (claim IDs)
  - `status` (active/deprecated)
- Store in Facts repository
- **Critical**: Facts are scarce, Claims are abundant (per Synopsis)

#### 2.3 Validation Questions Engine
- Agent asks targeted questions: "Is this claim correct?", "What's the confidence level?", "Is entity X the same as entity Y?"
- Questions prioritized by: uncertainty, importance (derived from context), conflicting claims

---

### Phase 3: Entity Resolution & Knowledge Graph
*Link related entities and build queryable knowledge*

#### 3.1 Entity Registry
- Create `CanonicalEntity` store (per Synopsis ¬ß6)
- Track: primary label, aliases, type, sameAs/possiblySameAs links
- During claim extraction: check if entity already exists (fuzzy matching on name + type)
- Present entity merge suggestions to user

#### 3.2 Knowledge Graph Query
- Implement graph traversal queries:
  - "What are all facts about entity X?"
  - "What depends on module Y?"
  - "Show decision history for project Z"
- Simple graph visualization (nodes = entities, edges = predicates)

#### 3.3 Context Graph/Tree
- Contexts form a hierarchy (e.g., Product ‚Üí Features ‚Üí Feature-X)
- Claims/Facts inherit context
- Query: "Show all knowledge in this context subtree"

---

### Phase 4: Multi-Source Integration
*Expand beyond manual notes*

#### 4.1 Integration Adapters
- Create `IKnowledgeSource` interface
- Implement adapters for:
  - Jira (issues ‚Üí Notes)
  - Confluence (pages ‚Üí Notes)
  - Email (messages ‚Üí Notes)
  - Teams/Slack (conversations ‚Üí Notes)
- Each adapter maps source data to Note + Context

#### 4.2 Incremental Processing
- Track which notes have been processed
- Re-process on source updates
- Handle claim evolution (new version vs. contradiction)

---

### Phase 5: Advanced Intelligence
*Make the system proactive*

#### 5.1 Contradiction Detection
- Identify conflicting claims (same subject + predicate, different objects)
- Surface to user for resolution

#### 5.2 Knowledge Completeness
- Detect missing information (e.g., "Module X depends on Y, but Y has no documentation")
- Suggest questions to ask users

#### 5.3 Temporal Knowledge
- Add `validFrom`/`validTo` to facts (per Synopsis ¬ß9)
- Track knowledge evolution over time
- Query: "What did we know about X in Q3 2025?"

---

## Immediate Next Steps (Next 2 Weeks)

### Week 1: Storage Foundation
1. Create `ClaimRepository` with file/SQLite storage
2. Add `Context` entity and repository
3. Update `NotesController` to save extracted claims with context
4. Add GET endpoint to retrieve claims by context

### Week 2: Basic Validation UI
1. Create Angular component to display claims from a note
2. Add approve/reject buttons (call backend API)
3. Implement Fact creation on approval
4. Show facts in separate UI section

### Deliverable
A working loop where:
- User enters note
- System extracts claims
- User reviews claims
- Approved claims become Facts
- Facts are stored and queryable by context

---

## Architecture Recommendations

### Data Model Additions

```csharp
// Context for organizing knowledge
public class Context
{
    public string Id { get; set; }
    public string Name { get; set; }
    public ContextType Type { get; set; } // Project, Product, Process, People
    public string? ParentId { get; set; }
    public DateTime CreatedAt { get; set; }
}

// Enhance Claim with persistence metadata
public class StoredClaim : Claim
{
    public string Id { get; set; }
    public string ContextId { get; set; }
    public float Confidence { get; set; }
    public string ExtractedBy { get; set; } // "Agent:technical_pm"
    public DateTime ExtractedAt { get; set; }
    public ClaimStatus Status { get; set; } // Pending, Approved, Rejected
}

// Fact (promoted claim)
public class Fact
{
    public string Id { get; set; }
    public Entity Subject { get; set; }
    public PredicateProperty Predicate { get; set; }
    public Entity Object { get; set; }
    public List<string> DerivedFromClaimIds { get; set; }
    public string ApprovedBy { get; set; }
    public DateTime ApprovedAt { get; set; }
    public DateTime ValidFrom { get; set; }
    public DateTime? ValidTo { get; set; }
    public FactStatus Status { get; set; } // Active, Deprecated
}
```

### Technology Choices

- **Storage**: Start with SQLite (embedded, no setup), migrate to PostgreSQL later if needed
- **ORM**: Use Dapper (lightweight) or EF Core
- **Graph Queries**: Start simple (SQL joins), consider Neo4j later for complex graph traversal

---

## North Star Vision

A tool that defines knowledge in a well-structured form where:
- Users enter notes (later integrated from Jira/Confluence/mail/Teams)
- System extracts structured claims using LLM
- Users validate claims through interactive questions (is this correct? what's the relevance?)
- Approved claims become Facts in a queryable knowledge graph
- Knowledge is organized by context map/tree (project, product, process, people)
- System proactively identifies gaps, contradictions, and areas needing attention
